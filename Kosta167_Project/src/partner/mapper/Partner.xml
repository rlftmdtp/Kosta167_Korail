<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="partner.mapper.PartnerMapper">
	<cache />
	<!-- TO_DATE('2017-11-10 09:00', 'YYYY-MM-DD HH24:MI') -->
	<select id="calendar_search" parameterType="java.util.HashMap"
		resultType="Member">
		<!-- select m_id, m_pw, m_name, m_gender, m_age, m_hp from member -->
		select
			m.m_id as m_id,
			m.m_pw as m_pw,
			m.m_name as m_name,
			m.m_gender as
			m_gender,
			m.m_age as m_age,
			m.m_hp as m_hp
		from COURSE c, COURSEDETAIL d, member m , shareText s
		WHERE c.c_id = d.c_id
			AND m.m_id = c.m_id
			AND	m.m_id=s.m_id
			AND d.cd_stime > TO_DATE(#{startDate},'YYYY/MM/DD/HH24/MI')
			AND TO_DATE(#{endDate}, 'YYYY/MM/DD/HH24/MI') >	d.cd_etime
			AND s.SH_SHAREOK='Y'
			AND d.CD_START = '수원'
			AND d.CD_END = '천안'
	</select>

	<select id="partner_allList" resultType="Member"> select m.m_id as 
		m_id, m.m_pw as m_pw, m.m_name as m_name, m.m_gender as m_gender, m.m_age 
		as m_age, m.m_hp as m_hp from member m, shareText s where m.m_id=s.m_id AND 
		s.SH_SHAREOK='Y' 
	</select> 
	
	
	<select id="station_search" resultType="Member" parameterType="java.util.HashMap">
		select
			m.m_id as m_id,
			m.m_pw as m_pw,
			m.m_name as m_name,
			m.m_gender as
			m_gender,
			m.m_age as m_age,
			m.m_hp as m_hp
			  from member m, COURSEDETAIL d, COURSE c, SHARETEXT s
			  where c.M_ID=m.M_ID
			    AND d.C_ID = c.C_ID
			    AND s.M_ID = m.M_ID
			    AND s.SH_SHAREOK = 'Y'
			    AND d.CD_END = #{station}		
	</select>
	 


</mapper>