<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "message.mapper.MessageMapper">
	<cache />
	
	<!-- 쪽지번호 +1씩 증가시켜주기 -->
	<select id = "selectMsg_no" resultType="Integer">
		select max(msg_no) from message
	</select>
	
	<!-- Message DB에 삽입하기 -->
	<insert id = "insertMessage" parameterType="Message">
		insert into Message(msg_no, m_id, msg_sendid, msg_content, msg_date, msg_hit)
					values(#{msg_no}, #{m_id}, #{msg_sendid}, #{msg_content}, SYSDATE , 0)
	</insert>
	
	<!-- 받는 사람의 id가 회원DB에 존재하는지 -->
	<select id="checkId" resultType="String" parameterType="String">
		select m_id from member where m_id = #{m_id} 
	</select>
	
 	<select id="msg_receive" resultType="Message" parameterType="String">
		select * from message where msg_sendid = #{m_id}
	</select>  
	
	<select id="selectMessage" parameterType="int" resultType="Message">
		select * from message where msg_no = #{msg_no}
	</select>
	
	<select id="selectMsg_hit" resultType="Integer" parameterType="int">
		select msg_hit from message where msg_no = #{msg_no}
	</select>
	
	<update id="updateHitcount" parameterType="Message">
		update message set msg_hit = #{msg_hit} where msg_no = #{msg_no}
	</update>
	
	<delete id="deleteMessage" parameterType="int">
		delete from message where msg_no = #{msg_no}
	</delete>
	
	<select id="login" resultType="Member" parameterType="Member">
		select *
		from member where m_id = #{m_id} and m_pw = #{m_pw}
	</select>
	
<!-- 	<select id="countRecivemsg" resultType="int">
		select count(*) from Message
	</select>
	 -->
	
	
	
	
	
	
	
	
	
	
	
	</mapper>